(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"";async function a(e,s={},r){let i=new Headers(s.headers||{});i.set("Accept","application/json"),s.body instanceof FormData||i.set("Content-Type","application/json"),r&&i.set("Authorization",`Bearer ${r}`);let l={...s,headers:i};"GET"!==s.method&&s.method||(l.cache="no-store");let o=await fetch(`${t}${e}`,l);if(!o.ok){let e=o.statusText;try{let t=await o.json();e=t?.error||e}catch{}throw Error(e||"Request failed")}if(204!==o.status)return o.json()}e.s(["apiRequest",()=>a])},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background/80 dark:bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},69505,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(49676),r=e.i(9165),i=e.i(15288),l=e.i(19455),o=e.i(93479),n=e.i(10204),d=e.i(24687),c=e.i(46696);function u(){let{getAccessToken:e}=(0,s.useAdminAuth)(),[u,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[g,x]=(0,a.useState)(null),[f,j]=(0,a.useState)({title:"",excerpt:"",category:"",content:"",read_time:"5 min",tags:[]});(0,a.useEffect)(()=>{v()},[]);let v=async()=>{try{p(!0);let t=await e(),a=await (0,r.apiRequest)("/api/posts",{method:"GET"},t);m(a||[])}catch(e){c.toast.error(e instanceof Error?e.message:"Failed to load posts")}finally{p(!1)}},y=()=>j({title:"",excerpt:"",category:"",content:"",read_time:"5 min",tags:[]}),b=async t=>{if(t.preventDefault(),!f.title||!f.excerpt||!f.category||!f.content)return void c.toast.error("Please fill all required fields");try{var a;let t=await e(),s={title:f.title,excerpt:f.excerpt,category:f.category,content:f.content,readTime:f.read_time||"5 min",tags:(a=f.tags,Array.isArray(a)?a:"string"==typeof a?a.split(",").map(e=>e.trim()).filter(Boolean):[]),heroImage:f.hero_image||null,publishedAt:f.published_at||new Date().toISOString()};g?(await (0,r.apiRequest)(`/api/posts/${g.id}`,{method:"PUT",body:JSON.stringify(s)},t),c.toast.success("Post updated")):(await (0,r.apiRequest)("/api/posts",{method:"POST",body:JSON.stringify(s)},t),c.toast.success("Post created")),await v(),x(null),y()}catch(e){c.toast.error(e instanceof Error?e.message:"Failed to save post")}},N=async t=>{if(confirm("Delete this post?"))try{let a=await e();await (0,r.apiRequest)(`/api/posts/${t}`,{method:"DELETE"},a),c.toast.success("Post deleted"),await v()}catch(e){c.toast.error(e instanceof Error?e.message:"Failed to delete post")}};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-display",children:"Blog Posts"}),(0,t.jsxs)(i.Card,{className:"border-border/50",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{className:"text-lg",children:g?"Edit Post":"Add New Post"})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("form",{onSubmit:b,className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"title",children:"Title"}),(0,t.jsx)(o.Input,{id:"title",value:f.title,onChange:e=>j(t=>({...t,title:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"category",children:"Category"}),(0,t.jsx)(o.Input,{id:"category",value:f.category,onChange:e=>j(t=>({...t,category:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"published_at",children:"Published Date"}),(0,t.jsx)(o.Input,{id:"published_at",type:"date",value:f.published_at||"",onChange:e=>j(t=>({...t,published_at:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"read_time",children:"Read time"}),(0,t.jsx)(o.Input,{id:"read_time",value:f.read_time||"",onChange:e=>j(t=>({...t,read_time:e.target.value}))})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,t.jsx)(d.Textarea,{id:"excerpt",value:f.excerpt,onChange:e=>j(t=>({...t,excerpt:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"content",children:"Content"}),(0,t.jsx)(d.Textarea,{id:"content",value:f.content||"",onChange:e=>j(t=>({...t,content:e.target.value})),required:!0,className:"min-h-[200px]"})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"tags",children:"Tags (comma separated)"}),(0,t.jsx)(o.Input,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:e=>j(t=>({...t,tags:e.target.value}))})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"hero_image",children:"Hero Image URL"}),(0,t.jsx)(o.Input,{id:"hero_image",value:f.hero_image||"",onChange:e=>j(t=>({...t,hero_image:e.target.value}))})]}),(0,t.jsxs)("div",{className:"md:col-span-2 flex gap-2",children:[(0,t.jsx)(l.Button,{type:"submit",children:g?"Save Changes":"Add Post"}),g&&(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>{x(null),y()},children:"Cancel"})]})]})})]}),h?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading posts..."}):(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===u.length?(0,t.jsx)("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"No posts yet. Create your first post above."}):u.map(e=>(0,t.jsx)(i.Card,{className:"border-border/50 overflow-hidden",children:(0,t.jsxs)(i.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"aspect-video w-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-muted-foreground/60 text-sm",children:e.hero_image?(0,t.jsx)("img",{src:e.hero_image,alt:e.title,className:"w-full h-full object-cover"}):"Cover"}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"font-semibold",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:e.category}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:e.excerpt}),e.published_at&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(e.published_at).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex gap-2 p-4 pt-0",children:[(0,t.jsx)(l.Button,{size:"sm",variant:"outline",onClick:()=>{x(e),j({...e,read_time:e.read_time||"5 min",tags:e.tags.join(", "),published_at:e.published_at?new Date(e.published_at).toISOString().slice(0,10):void 0})},children:"Edit"}),(0,t.jsx)(l.Button,{size:"sm",variant:"destructive",onClick:()=>N(e.id),children:"Delete"})]})]})},e.id))})]})}e.s(["default",()=>u])}]);