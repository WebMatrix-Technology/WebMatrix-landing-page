(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let s=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>s],63488)},9165,e=>{"use strict";let s=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"";async function t(e,a={},r){let l=new Headers(a.headers||{});l.set("Accept","application/json"),a.body instanceof FormData||l.set("Content-Type","application/json"),r&&l.set("Authorization",`Bearer ${r}`);let d={...a,headers:l};"GET"!==a.method&&a.method||(d.cache="no-store");let i=await fetch(`${s}${e}`,d);if(!i.ok){let e=i.statusText;try{let s=await i.json();e=s?.error||e}catch{}throw Error(e||"Request failed")}if(204!==i.status)return i.json()}e.s(["apiRequest",()=>t])},31278,e=>{"use strict";let s=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},25652,e=>{"use strict";let s=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>s],25652)},72520,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>s],72520)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},84614,e=>{"use strict";let s=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],84614)},72906,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(15288),r=e.i(19455),l=e.i(9165),d=e.i(49676),i=e.i(31278);let c=(0,e.i(75254).default)("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);var n=e.i(78583),o=e.i(63488),x=e.i(25652),m=e.i(3116),h=e.i(72520),j=e.i(84614),u=e.i(46696),p=e.i(22016);function f(){let{getAccessToken:e}=(0,d.useAdminAuth)(),[f,N]=(0,t.useState)(null),[g,y]=(0,t.useState)(!0),b=(0,t.useCallback)(async()=>{y(!0);try{let s=await e();if(!s)throw Error("Session expired. Please log in again.");let t=await (0,l.apiRequest)("/api/dashboard",{},s);N(t)}catch(s){let e=s instanceof Error?s.message:"Failed to load dashboard stats.";console.error("Dashboard fetch error:",s),e.includes("Not found")||e.includes("404")?u.toast.error("Dashboard API endpoint not found. Please ensure the server is running."):u.toast.error(e),N({projects:{total:0,today:0},posts:{total:0,today:0},leads:{total:0,today:0,thisWeek:0},recent:{projects:[],posts:[],leads:[]}})}finally{y(!1)}},[e]);(0,t.useEffect)(()=>{b()},[b]);let w=e=>{let s=new Date(e),t=new Date().getTime()-s.getTime(),a=Math.floor(t/6e4),r=Math.floor(t/36e5),l=Math.floor(t/864e5);return a<1?"Just now":a<60?`${a}m ago`:r<24?`${r}h ago`:l<7?`${l}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return g?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-display",children:"Dashboard"}),(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading dashboard..."})]})]}):f?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-display",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Overview of your content and leads"})]}),(0,s.jsx)(r.Button,{onClick:b,variant:"outline",size:"sm",children:"Refresh"})]}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsx)(a.Card,{className:"border-border/50 hover:border-primary/50 transition-colors",children:(0,s.jsxs)(a.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(c,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)(p.default,{href:"/admin/projects",children:(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Projects"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:f.projects.total}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,s.jsx)(x.TrendingUp,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[f.projects.today," added today"]})]})]})]})}),(0,s.jsx)(a.Card,{className:"border-border/50 hover:border-primary/50 transition-colors",children:(0,s.jsxs)(a.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-lg bg-accent/10 flex items-center justify-center",children:(0,s.jsx)(n.FileText,{className:"h-6 w-6 text-accent"})}),(0,s.jsx)(p.default,{href:"/admin/posts",children:(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blog Posts"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:f.posts.total}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,s.jsx)(x.TrendingUp,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[f.posts.today," added today"]})]})]})]})}),(0,s.jsx)(a.Card,{className:"border-border/50 hover:border-primary/50 transition-colors",children:(0,s.jsxs)(a.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-lg bg-success/10 flex items-center justify-center",children:(0,s.jsx)(o.Mail,{className:"h-6 w-6 text-success"})}),(0,s.jsx)(p.default,{href:"/admin/leads",children:(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Leads"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:f.leads.total}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,s.jsx)(x.TrendingUp,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[f.leads.thisWeek," this week"]})]})]})]})})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-4",children:[(0,s.jsxs)(a.Card,{className:"border-border/50",children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsxs)(a.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5"}),"Recent Projects"]})}),(0,s.jsx)(a.CardContent,{children:0===f.recent.projects.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No projects yet"}):(0,s.jsxs)("div",{className:"space-y-3",children:[f.recent.projects.map(e=>(0,s.jsx)("div",{className:"flex items-start justify-between gap-2 pb-3 border-b border-border/30 last:border-0 last:pb-0",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[(0,s.jsx)(m.Clock,{className:"h-3 w-3"}),w(e.created_at)]})]})},e.id)),(0,s.jsx)(p.default,{href:"/admin/projects",children:(0,s.jsxs)(r.Button,{variant:"ghost",size:"sm",className:"w-full mt-2",children:["View All ",(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4 ml-1"})]})})]})})]}),(0,s.jsxs)(a.Card,{className:"border-border/50",children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsxs)(a.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(n.FileText,{className:"h-5 w-5"}),"Recent Posts"]})}),(0,s.jsx)(a.CardContent,{children:0===f.recent.posts.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No posts yet"}):(0,s.jsxs)("div",{className:"space-y-3",children:[f.recent.posts.map(e=>(0,s.jsx)("div",{className:"flex items-start justify-between gap-2 pb-3 border-b border-border/30 last:border-0 last:pb-0",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[(0,s.jsx)(m.Clock,{className:"h-3 w-3"}),w(e.created_at)]})]})},e.id)),(0,s.jsx)(p.default,{href:"/admin/posts",children:(0,s.jsxs)(r.Button,{variant:"ghost",size:"sm",className:"w-full mt-2",children:["View All ",(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4 ml-1"})]})})]})})]}),(0,s.jsxs)(a.Card,{className:"border-border/50",children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsxs)(a.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(o.Mail,{className:"h-5 w-5"}),"Recent Leads"]})}),(0,s.jsx)(a.CardContent,{children:0===f.recent.leads.length?(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No leads yet"}):(0,s.jsxs)("div",{className:"space-y-3",children:[f.recent.leads.map(e=>(0,s.jsx)("div",{className:"flex items-start justify-between gap-2 pb-3 border-b border-border/30 last:border-0 last:pb-0",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,s.jsx)(j.User,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.name})]}),(0,s.jsx)("a",{href:`mailto:${e.email}`,className:"text-xs text-muted-foreground hover:text-primary transition-colors truncate block",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[(0,s.jsx)(m.Clock,{className:"h-3 w-3"}),w(e.created_at)]})]})},e.id)),(0,s.jsx)(p.default,{href:"/admin/leads",children:(0,s.jsxs)(r.Button,{variant:"ghost",size:"sm",className:"w-full mt-2",children:["View All ",(0,s.jsx)(h.ArrowRight,{className:"h-4 w-4 ml-1"})]})})]})})]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-display",children:"Dashboard"}),(0,s.jsx)(a.Card,{className:"border-border/50",children:(0,s.jsxs)(a.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Failed to load dashboard data."}),(0,s.jsx)(r.Button,{onClick:b,className:"mt-4",variant:"outline",children:"Retry"})]})})]})}e.s(["default",()=>f],72906)}]);