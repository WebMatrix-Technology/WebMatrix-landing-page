module.exports=[19032,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"";async function c(a,d={},e){let f=new Headers(d.headers||{});f.set("Accept","application/json"),d.body instanceof FormData||f.set("Content-Type","application/json"),e&&f.set("Authorization",`Bearer ${e}`);let g={...d,headers:f};"GET"!==d.method&&d.method||(g.cache="no-store");let h=await fetch(`${b}${a}`,g);if(!h.ok){let a=h.statusText;try{let b=await h.json();a=b?.error||a}catch{}throw Error(a||"Request failed")}if(204!==h.status)return h.json()}a.s(["apiRequest",()=>c])},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background/80 dark:bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},73969,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55021),e=a.i(19032),f=a.i(91119),g=a.i(99570),h=a.i(66718),i=a.i(70430),j=a.i(29246),k=a.i(23292);function l(){let{getAccessToken:a}=(0,d.useAdminAuth)(),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)({title:"",excerpt:"",category:"",content:"",read_time:"5 min",tags:[]});(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{o(!0);let b=await a(),c=await (0,e.apiRequest)("/api/posts",{method:"GET"},b);m(c||[])}catch(a){k.toast.error(a instanceof Error?a.message:"Failed to load posts")}finally{o(!1)}},u=()=>s({title:"",excerpt:"",category:"",content:"",read_time:"5 min",tags:[]}),v=async b=>{if(b.preventDefault(),!r.title||!r.excerpt||!r.category||!r.content)return void k.toast.error("Please fill all required fields");try{var c;let b=await a(),d={title:r.title,excerpt:r.excerpt,category:r.category,content:r.content,readTime:r.read_time||"5 min",tags:(c=r.tags,Array.isArray(c)?c:"string"==typeof c?c.split(",").map(a=>a.trim()).filter(Boolean):[]),heroImage:r.hero_image||null,publishedAt:r.published_at||new Date().toISOString()};p?(await (0,e.apiRequest)(`/api/posts/${p.id}`,{method:"PUT",body:JSON.stringify(d)},b),k.toast.success("Post updated")):(await (0,e.apiRequest)("/api/posts",{method:"POST",body:JSON.stringify(d)},b),k.toast.success("Post created")),await t(),q(null),u()}catch(a){k.toast.error(a instanceof Error?a.message:"Failed to save post")}},w=async b=>{if(confirm("Delete this post?"))try{let c=await a();await (0,e.apiRequest)(`/api/posts/${b}`,{method:"DELETE"},c),k.toast.success("Post deleted"),await t()}catch(a){k.toast.error(a instanceof Error?a.message:"Failed to delete post")}};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-display",children:"Blog Posts"}),(0,b.jsxs)(f.Card,{className:"border-border/50",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-lg",children:p?"Edit Post":"Add New Post"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:v,className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"title",children:"Title"}),(0,b.jsx)(h.Input,{id:"title",value:r.title,onChange:a=>s(b=>({...b,title:a.target.value})),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"category",children:"Category"}),(0,b.jsx)(h.Input,{id:"category",value:r.category,onChange:a=>s(b=>({...b,category:a.target.value})),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"published_at",children:"Published Date"}),(0,b.jsx)(h.Input,{id:"published_at",type:"date",value:r.published_at||"",onChange:a=>s(b=>({...b,published_at:a.target.value}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"read_time",children:"Read time"}),(0,b.jsx)(h.Input,{id:"read_time",value:r.read_time||"",onChange:a=>s(b=>({...b,read_time:a.target.value}))})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,b.jsx)(j.Textarea,{id:"excerpt",value:r.excerpt,onChange:a=>s(b=>({...b,excerpt:a.target.value})),required:!0})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"content",children:"Content"}),(0,b.jsx)(j.Textarea,{id:"content",value:r.content||"",onChange:a=>s(b=>({...b,content:a.target.value})),required:!0,className:"min-h-[200px]"})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"tags",children:"Tags (comma separated)"}),(0,b.jsx)(h.Input,{id:"tags",value:Array.isArray(r.tags)?r.tags.join(", "):r.tags||"",onChange:a=>s(b=>({...b,tags:a.target.value}))})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"hero_image",children:"Hero Image URL"}),(0,b.jsx)(h.Input,{id:"hero_image",value:r.hero_image||"",onChange:a=>s(b=>({...b,hero_image:a.target.value}))})]}),(0,b.jsxs)("div",{className:"md:col-span-2 flex gap-2",children:[(0,b.jsx)(g.Button,{type:"submit",children:p?"Save Changes":"Add Post"}),p&&(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>{q(null),u()},children:"Cancel"})]})]})})]}),n?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading posts..."}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===l.length?(0,b.jsx)("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"No posts yet. Create your first post above."}):l.map(a=>(0,b.jsx)(f.Card,{className:"border-border/50 overflow-hidden",children:(0,b.jsxs)(f.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"aspect-video w-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-muted-foreground/60 text-sm",children:a.hero_image?(0,b.jsx)("img",{src:a.hero_image,alt:a.title,className:"w-full h-full object-cover"}):"Cover"}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"font-semibold",children:a.title}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:a.category}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-2",children:a.excerpt}),a.published_at&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(a.published_at).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex gap-2 p-4 pt-0",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"outline",onClick:()=>{q(a),s({...a,read_time:a.read_time||"5 min",tags:a.tags.join(", "),published_at:a.published_at?new Date(a.published_at).toISOString().slice(0,10):void 0})},children:"Edit"}),(0,b.jsx)(g.Button,{size:"sm",variant:"destructive",onClick:()=>w(a.id),children:"Delete"})]})]})},a.id))})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=src_8c0dd463._.js.map